webpackJsonp([15],{261:function(o,e,t){"use strict";function n(o){t(313)}Object.defineProperty(e,"__esModule",{value:!0});var a=t(283),i=t(315),c=t(131),r=n,s=c(a.a,i.a,!1,r,null,null);e.default=s.exports},283:function(o,e,t){"use strict";var n=t(134),a=t(2);e.a={components:{QInput:a.n,QDatetime:a.k,QBtn:a.b,QItem:a.o,QItemSide:a.q,QItemMain:a.p,QIcon:a.m,QLayout:a.s,QTabs:a.y,QList:a.t,QCollapsible:a.i},data:function(){return{map:null,loc:{lat:"",lng:""},geocoder:null,markers:[],polygons:[],icon:{url:"statics/geocode-71_.png",origin:new google.maps.Point(0,0),anchor:new google.maps.Point(17,34),scaledSize:new google.maps.Size(30,30)}}},props:["spaces","location","destination"],methods:{redraw:function(o,e){this.cleanPolygons(),this.draw(o,e)},draw_space:function(o,e,t){this.cleanPolygons(),this.draw([o[e]],t)},draw:function(o,e){var t=this;o.forEach(function(o){var n;switch(o.zone_name){case"A":n=t.constructPolygon(o.coordinates,"red",e);break;case"B":n=t.constructPolygon(o.coordinates,"#105990",e);break;default:n=t.constructPolygon(o.coordinates,"#f65314",e)}n.setMap(e),t.polygons.push(n)})},constructPolygon:function(o,e,t){return new google.maps.Polygon({paths:o,strokeColor:e,strokeOpacity:.8,strokeWeight:2,fillColor:e,fillOpacity:.35,map:t})},cleanPolygons:function(){this.polygons.forEach(function(o){o.setMap(null)}),this.polygons=[]},cleanMarkers:function(){this.markers.forEach(function(o){o.setMap(null)}),this.markers=[]},addMarker:function(o,e){this.markers.push(new google.maps.Marker({map:this.map,icon:this.icon,title:e,animation:google.maps.Animation.DROP,position:o}))}},mounted:function(){var o=this;navigator.geolocation.getCurrentPosition(function(e){o.loc.lng=e.coords.longitude,o.loc.lat=e.coords.latitude,o.map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:o.loc}),o.addMarker(o.loc,"Current"),o.geocoder=new google.maps.Geocoder,o.geocoder.geocode({location:o.loc},function(e,t){"OK"===t&&e[0]&&n.a.$emit("start",o.loc)}),n.a.$on("page",function(e){if("Start"!=e){var t=new google.maps.places.SearchBox(document.getElementById("search_box"));t.addListener("places_changed",function(){var e=t.getPlaces();if(0!=e.length){o.cleanMarkers();var a=new google.maps.LatLngBounds;e.forEach(function(e){if(!e.geometry)return void console.log("Returned place contains no geometry");o.addMarker(e.geometry.location,e.name),o.loc.lng=e.geometry.location.lng(),o.loc.lat=e.geometry.location.lat(),o.geocoder=new google.maps.Geocoder,o.geocoder.geocode({location:o.loc},function(e,t){"OK"===t&&e[0]&&(o.$emit("update:destination",e[0].formatted_address),n.a.$emit("destination",e[0].formatted_address))}),o.$emit("update:location",o.loc),e.geometry.viewport?a.union(e.geometry.viewport):a.extend(e.geometry.location)}),o.map.fitBounds(a)}})}}),o.map.addListener("click",function(e){var t=e.latLng;o.cleanMarkers(),o.map.panTo(t),o.markers.push(new google.maps.Marker({map:o.map,icon:o.icon,animation:google.maps.Animation.DROP,position:t})),o.loc.lng=t.lng(),o.loc.lat=t.lat(),o.$emit("update:location",o.loc),o.geocoder=new google.maps.Geocoder,o.geocoder.geocode({location:t},function(e,t){"OK"===t&&e[0]&&o.$emit("update:destination",e[0].formatted_address)})}),n.a.$on("draw",function(e){o.draw(e,o.map)}),n.a.$on("redraw",function(e){o.redraw(e,o.map)}),n.a.$on("draw_space",function(e,t){o.draw_space(e,t,o.map)}),n.a.$on("location",function(e){o.loc=e,o.map=new google.maps.Map(document.getElementById("map"),{zoom:15,center:o.loc}),o.addMarker(o.loc,"Destination")})})}}},313:function(o,e,t){var n=t(314);"string"==typeof n&&(n=[[o.i,n,""]]),n.locals&&(o.exports=n.locals);t(255)("24cc4935",n,!0)},314:function(o,e,t){e=o.exports=t(254)(void 0),e.push([o.i,".A i{color:red}.B i{color:#105990}.C,.D i{color:#f65314}",""])},315:function(o,e,t){"use strict";var n=function(){var o=this,e=o.$createElement;o._self._c;return o._m(0)},a=[function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("div",{staticClass:"layout-padding"},[t("div",{staticStyle:{width:"100%",height:"275px","margin-bottom":"25px"},attrs:{id:"map"}})])}],i={render:n,staticRenderFns:a};e.a=i}});