webpackJsonp([18],{274:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a(296),i=a(350),n=a(131),r=n(s.a,i.a,!1,null,null,null);e.default=r.exports},277:function(t,e,a){"use strict";var s=a(2);e.a={leaving_time:null,showMsg:function(t,e){s.B.create[e]({html:t,position:top,timeout:1e4})},getLeavingTime:function(){return this.leaving_time},setLeavingTime:function(t){this.leaving_time=t},dialog:{label:"Parking Time",icon:"warning",handler:function(t){s.a.create({title:"Time about to end!",message:t})}}}},296:function(t,e,a){"use strict";var s=a(133),i=a.n(s),n=a(132),r=a(277),c=a(2),o="http://localhost:4000";e.a={components:{QInput:c.n,QDatetime:c.k,QBtn:c.b,QItem:c.o,QItemSide:c.q,QItemMain:c.p,QIcon:c.m,QCard:c.c,QCardTitle:c.g,QCardActions:c.d,QCardSeparator:c.f,QCardMain:c.e,Dialog:c.a},data:function(){return{status:{},msg:""}},methods:{extendPeriod:function(){var t=this;c.a.create({title:"Confirm",message:"Are you sure you want to extend your parking period?",buttons:[{label:"Yes",handler:function(){var e=this;i.a.patch(o+"/api/parkings/"+t.status.id+"/extend",{status:t.status},{headers:n.a.getAuthHeader()}).then(function(t){e.getStatus()}).catch(function(t){r.a.showMsg(t.response.data.msg,"negative")})}},{label:"No",handler:function(){}}]})},endPeriod:function(){var t=this;c.a.create({title:"Confirm",message:"Are you sure you want to end your parking period?",buttons:[{label:"Yes",handler:function(){i.a.patch(o+"/api/parkings/"+t.status.id+"/end",{status:t.status},{headers:n.a.getAuthHeader()}).then(function(t){}).catch(function(t){r.a.showMsg(t.response.data.msg,"negative")})}},{label:"No",handler:function(){}}]})},getStatus:function(){var t=this;i.a.get(o+"/api/parkings/status",{headers:n.a.getAuthHeader()}).then(function(e){t.status=e.data},function(e){t.msg=e.response.data.msg})}},mounted:function(){var t=this;if(n.a.socket){var e=n.a.getChannel("user:");e.join().receive("ok",function(t){console.log("Joined successfully",t)}).receive("error",function(t){console.log("Unable to join",t)}),e.on("notifications",function(e){"Parking Ended"==e.msg?(r.a.showMsg(e.msg,"positive"),e.invoice_id?t.$router.push({path:"/"+e.invoice_id+"/payments",query:{redirect:"/invoices"}}):(r.a.showMsg(e.msg,"positive"),t.$router.push({path:"/invoices"}))):r.a.dialog.handler(e.msg)}),e.on("extension",function(e){e.invoice_id?t.$router.push({path:"/"+e.invoice_id+"/payments",query:{redirect:"/status"}}):t.$router.push({path:"/invoices"})})}this.getStatus()}}},350:function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"layout-padding ",attrs:{id:"view-flex"}},[a("div",{staticClass:"row justify-center"},[t.status.id?a("div",[t._m(0),t._v(" "),a("q-card",{staticClass:"full-width animated fadeIn",attrs:{inline:"",color:"indigo"}},[a("q-card-title",{staticClass:"justify-center"},[t._v("\n          Parked at:  "+t._s(t.status.location)+"\n          "),"HOURLY"==t.status.payment_scheme?a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v(t._s(t.status.time_left)+" Minutes left ")]):t._e(),t._v(" "),"HOURLY"!=t.status.payment_scheme?a("span",{attrs:{slot:"subtitle"},slot:"subtitle"},[t._v(t._s(t.status.elapsed_time)+" Minutes elapsed")]):t._e()]),t._v(" "),a("q-card-main",[a("table",{staticClass:"q-table"},[a("tbody",[a("tr",[a("th",{staticClass:"text-left"},[t._v("Start Time:")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.status.start_time))])]),t._v(" "),"HOURLY"==t.status.payment_scheme?a("tr",[a("th",{staticClass:"text-left"},[t._v("End Time:")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.status.end_time))])]):t._e(),t._v(" "),a("tr",[a("th",{staticClass:"text-left"},[t._v("Payment Scheme:")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v(t._s(t.status.payment_scheme))])]),t._v(" "),"HOURLY"==t.status.payment_scheme?a("tr",[a("th",{staticClass:"text-left"},[t._v("Fee:")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("€"+t._s(t.status.amount))])]):t._e(),t._v(" "),"HOURLY"!=t.status.payment_scheme?a("tr",[a("th",{staticClass:"text-left"},[t._v("Fee Estimation:")]),t._v(" "),a("td",{staticClass:"text-right"},[t._v("€"+t._s(t.status.estimate))])]):t._e()])])]),t._v(" "),a("q-card-separator"),t._v(" "),"HOURLY"==t.status.payment_scheme?a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{incon:"credit card",flat:""},on:{click:t.extendPeriod}},[t._v("Extend")]),t._v(" "),a("q-btn",{attrs:{icon:"input",flat:""},on:{click:t.endPeriod}},[t._v("End")])],1):t._e(),t._v(" "),"HOURLY"!=t.status.payment_scheme?a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{icon:"input",flat:""},on:{click:t.endPeriod}},[t._v("End")])],1):t._e()],1)],1):t._e(),t._v(" "),t.status.id?t._e():a("div",{staticClass:"floating-label"},[t._m(1),t._v(" "),a("br"),t._v(" "),a("br"),t._v(" "),t._m(2)])])])},i=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"row justify-center animated flipInY",staticStyle:{margin:"20px"}},[a("img",{attrs:{src:"statics/activeparking.png",alt:"No active parking",width:"120",height:"120"}}),t._v(" "),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"justify-center animated shake",staticStyle:{margin:"20px"}},[a("img",{attrs:{src:"statics/sad.png",alt:"No active parking",width:"300",height:"240"}}),t._v(" "),a("br")])},function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"justify-center",staticStyle:{"text-align":"center"}},[a("label",[t._v("It seems like there is no active "),a("br")]),t._v(" "),a("label",[t._v("  parking right now "),a("br")]),t._v(" "),a("label",[t._v("  Please check this page later ")])])}],n={render:s,staticRenderFns:i};e.a=n}});